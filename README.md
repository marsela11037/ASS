# AAF
самостоятельная работа  

## Рефакторинг функции `calculate_average`

### Что изменено
- Добавлены аннотации типов и алиас `Number` для читаемости.
- Добавлена валидация: допускаются только `int` и `float`, булевы значения исключены.
- Подробный docstring с контрактом функции.
- Сохранено поведение: пустая последовательность → `None`.
- Пример использования вынесен под `if __name__ == "__main__"`.

Файл: `average.py`.

### Причины и принципы рефакторинга
- Явные типы улучшают предсказуемость и интеграцию со статическим анализом.
- Ранняя валидация входа делает ошибки очевидными и локализуемыми.
- Исключение `bool` предотвращает скрытые логические ошибки (наследование от `int`).
- Документация упрощает поддержку и повторное использование функции.
- Отделение примера от логики повышает тестируемость.

### Тестирование
Создан `test_average.py` (pytest):
- Проверка среднего для целых чисел.
- Проверка среднего для `float`.
- Проверка возврата `None` для пустого ввода.
- Проверка `TypeError` при некорректных элементах и при наличии `bool`.

Запуск тестов (при установленном pytest):
```bash
pytest -q
```

### Пример использования
```python
from average import calculate_average

numbers_list = [10, 20, 30, 40]
result = calculate_average(numbers_list)
if result is not None:
    print(f"Среднее значение: {result}")
else:
    print("Список пуст")
```

### Подробные процедуры рефакторинга
1. Проанализирован исходный код и требование сохранить совместимость (пустой ввод → `None`).
2. Добавлены аннотации типов: `Sequence[Number] -> Optional[float]` и алиас `Number`.
3. Реализована валидация каждого элемента: запрет `bool`, допускаются `int`/`float`, детализированное сообщение об ошибке с индексом.
4. Уточнён контракт в docstring: вход, выход, поведение при пустом вводе.
5. Числитель явно приведён к `float` для стабильности деления.
6. Пример использования вынесен под `__main__` для удобного запуска и изоляции при импортировании.
7. Добавлены автоматические тесты, покрывающие корректные и ошибочные сценарии.


